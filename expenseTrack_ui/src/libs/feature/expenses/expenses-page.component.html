
<div class="p-8">
  <ui-card>
    <ui-card-header>
      <ui-card-title>Expenses</ui-card-title>
    </ui-card-header>
    <ui-card-content>
      <ui-button className="mb-4" (click)="openAdd()" variant="btn-primary">Add Expense</ui-button>
      <ui-input className="mb-4" placeholder="Search..." [(ngModel)]="search"></ui-input>
      <table class="w-full text-left">
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Amount</th>
            <th>Description</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let expense of filteredExpenses()">
            <td>{{ expense.date }}</td>
            <td>{{ expense.category_id }}</td>
            <td>{{ expense.amount | number:'1.2-2' }} {{ expense.currency }}</td>
            <td>{{ expense.description }}</td>
            <td>
              <ui-button className="btn-xs btn-outline mr-2" (click)="edit(expense)">Edit</ui-button>
              <ui-button className="btn-xs btn-error" (click)="confirmDelete(expense)">Delete</ui-button>
            </td>
          </tr>
        </tbody>
      </table>
    </ui-card-content>
  </ui-card>
</div>
<ui-modal [open]="modalOpen">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" modal-content>
    <div class="mb-4">
      <label>Date</label>
      <ui-input type="date" formControlName="date"></ui-input>
    </div>
    <div class="mb-4">
      <label>Category</label>
      <ui-input formControlName="category_id"></ui-input>
    </div>
    <div class="mb-4">
      <label>Amount</label>
      <ui-input type="number" formControlName="amount"></ui-input>
    </div>
    <div class="mb-4">
      <label>Currency</label>
      <ui-input formControlName="currency"></ui-input>
    </div>
    <div class="mb-4">
      <label>Description</label>
      <ui-input formControlName="description"></ui-input>
    </div>
    <div modal-actions>
      <ui-button type="button" (click)="closeModal()">Cancel</ui-button>
      <ui-button type="submit" variant="btn-primary" [disabled]="form.invalid">{{ editing ? 'Update' : 'Add' }}</ui-button>
    </div>
  </form>
</ui-modal>
<ui-confirm-dialog [open]="confirmOpen" title="Delete Expense" message="Are you sure you want to delete this expense?" (confirm)="deleteExpense()" (cancel)="confirmOpen=false"></ui-confirm-dialog>
  
